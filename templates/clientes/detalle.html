{% extends 'base/base.html' %}
{% load static %}

{% block title %}Detalle Cliente - FotoStudio{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/clientes.css' %}">
{% endblock %}

{% block page_title %}Detalle del Cliente{% endblock %}

{% block content %}
<div class="detalle-cliente-container">
    <div class="header-actions">
        <h2>
            {% if cliente.tipo == 'PARTICULAR' %}
                {{ cliente.nombres }} {{ cliente.apellidos }}
            {% else %}
                {{ cliente.razon_social }}
            {% endif %}
        </h2>
        <div class="acciones">
            <a href="{% url 'clientes:editar' cliente.pk %}" class="btn btn-warning">
                <i class="fas fa-edit"></i> Editar
            </a>
            <a href="{% url 'clientes:listar' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Volver
            </a>
        </div>
    </div>
    
    <div class="cliente-info">
        <div class="card">
            <div class="card-header">
                <h3>Información Personal</h3>
            </div>
            <div class="card-body">
                <div class="info-grid">
                    <div class="info-item">
                        <label>Tipo:</label>
                        <span class="badge badge-{{ cliente.tipo|lower }}">
                            {{ cliente.get_tipo_display }}
                        </span>
                    </div>
                    {% if cliente.tipo == 'PARTICULAR' %}
                        <div class="info-item">
                            <label>Nombres:</label>
                            <span>{{ cliente.nombres }}</span>
                        </div>
                        <div class="info-item">
                            <label>Apellidos:</label>
                            <span>{{ cliente.apellidos }}</span>
                        </div>
                        <div class="info-item">
                            <label>DNI:</label>
                            <span>{{ cliente.dni }}</span>
                        </div>
                    {% else %}
                        <div class="info-item">
                            <label>Razón Social:</label>
                            <span>{{ cliente.razon_social }}</span>
                        </div>
                        <div class="info-item">
                            <label>RUC:</label>
                            <span>{{ cliente.ruc }}</span>
                        </div>
                    {% endif %}
                    <div class="info-item">
                        <label>Teléfono:</label>
                        <span>{{ cliente.telefono|default:"No registrado" }}</span>
                    </div>
                    <div class="info-item">
                        <label>Email:</label>
                        <span>{{ cliente.email|default:"No registrado" }}</span>
                    </div>
                    <div class="info-item">
                        <label>Dirección:</label>
                        <span>{{ cliente.direccion|default:"No registrada" }}</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Pedidos del cliente -->
        <div class="card">
            <div class="card-header">
                <h3>Pedidos Recientes</h3>
            </div>
            <div class="card-body">
                {% if pedidos %}
                    <div class="pedidos-lista">
                        {% for pedido in pedidos %}
                        <div class="pedido-item">
                            <h5>{{ pedido.numero_pedido }}</h5>
                            <p>{{ pedido.get_tipo_servicio_display }} - {{ pedido.fecha_pedido|date:"d/m/Y" }}</p>
                            <span class="badge badge-{{ pedido.estado|lower }}">
                                {{ pedido.get_estado_display }}
                            </span>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p>No hay pedidos registrados para este cliente.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
